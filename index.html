<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        form {
            margin-bottom: 20px;
        }
        input, button {
            margin-right: 10px;
        }
    </style>
</head>
<body>

    <h2>File Management</h2>

    <!-- Create File Form -->
    <form id="createFileForm">
        <input type="file" id="fileUpload" required>
        <button type="button" onclick="uploadFile()">Upload File</button>
    </form>

    <!-- List Files -->
    <h3>List Files</h3>
    <div id="fileList"></div>

    <!-- Rename File Form -->
    <form id="renameFileForm">
        <input type="text" id="oldFileName" placeholder="Old File Name" required>
        <input type="text" id="newFileName" placeholder="New File Name" required>
        <button type="button" onclick="renameFile()">Rename File</button>
    </form>

    <!-- Delete File Form -->
    <form id="deleteFileForm">
        <input type="text" id="deleteFileName" placeholder="File Name" required>
        <button type="button" onclick="deleteFile()">Delete File</button>
    </form>

    <script>
        // Base URL for API
        const baseUrl = 'http://localhost:8080/api/files';

        // Function to upload a file
        function uploadFile() {
            const fileInput = document.getElementById('fileUpload');
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);

            fetch(`${baseUrl}/upload`, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert('File uploaded successfully!');
                    listFiles();
                } else {
                    alert('Failed to upload file');
                }
            });
        }

        // Function to list files
        function listFiles() {
            fetch(`${baseUrl}/list`)
                .then(response => response.json())
                .then(files => {
                    const fileListDiv = document.getElementById('fileList');
                    fileListDiv.innerHTML = files.join('<br>');
                });
        }

        // Function to rename a file
        function renameFile() {
            const oldName = document.getElementById('oldFileName').value;
            const newName = document.getElementById('newFileName').value;
            fetch(`${baseUrl}/rename?oldName=${oldName}&newName=${newName}`, { method: 'PUT' })
                .then(response => {
                    if (response.ok) {
                        alert('File renamed successfully!');
                        listFiles();
                    } else {
                        alert('Failed to rename file');
                    }
                });
        }

        // Function to delete a file
        function deleteFile() {
            const fileName = document.getElementById('deleteFileName').value;
            fetch(`${baseUrl}/delete?fileName=${fileName}`, { method: 'DELETE' })
                .then(response => {
                    if (response.ok) {
                        alert('File deleted successfully!');
                        listFiles();
                    } else {
                        alert('Failed to delete file');
                    }
                });
        }

        // Initialize file list
        listFiles();
    </script>

</body>
</html>
